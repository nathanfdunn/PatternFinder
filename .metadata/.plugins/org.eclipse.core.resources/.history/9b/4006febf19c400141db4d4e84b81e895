package behaviorClassification;

import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;

/**
 * 
 * @author nathandunn
 * Fills a table with the raw information from a CSV.
 */
public class CsvToTable {

	//Note CSV must have a header line
	public static RawDataTable readCsv(String fileName){
		String[][] contents = readAll(fileName);
		String[] header = null;
		int startLine;
		if (contents.length > 0 && isHeader(contents[0])){
			header = contents[0];
			startLine = 1;
		}else startLine = 0;
		
		double[][] entries = new double[contents.length - startLine][];
		
		for (int i=startLine; i<contents.length; i++){
			entries[i] = parseLine(contents[i]);
		}
		
		//return new RawDataTable();
	}
	
	private static double[] parseLine(String[] line){
		double[] out = new double[line.length];
		try {
			for (int i=0; i<out.length; i++)
				out[i] = Double.parseDouble(line[i]);
		} catch (Exception e){
			e.printStackTrace();
		}
		return out;
	}
	
	private static String[][] readAll(String fileName){
		ArrayList<String[]> contents = new ArrayList<String[]>();
		try{
			BufferedReader br = new BufferedReader(new FileReader(fileName));
			String line;
			while ((line = br.readLine()) != null) {
				contents.add(line.split(","));
			}
			br.close();
		}catch (Exception e){
			e.printStackTrace();
		}
		return contents.toArray(new String[contents.size()][]);
	}
	
	private static boolean isHeader(String[] line){
		if (line.length > 0){
			try {
				Double.parseDouble(line[0]);
				return false;
			} catch (Exception e){
				return true;
			}
		}else{
			return false;
		}
	}
	
	
}
